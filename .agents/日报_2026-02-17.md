# 日报 - 2026-02-17

## 今日目标
- 通信器外形继续向老版 OBJ 贴近，修复“材质乱、单层化”问题。
- 补齐 1.16.5 / 1.18.2 / 1.20.1（Fabric + Forge）通信器红石输入/输出行为一致性。
- 完成红石通信器（`signal_box_input` / `signal_box_output`）移植闭环。

## 主要改动
- 红石行为补齐（跨版本）
  - `fabric-1.16.5/src/main/java/cn/hydcraft/hydronyasama/fabric/TelecomInteractiveBlock.java`
  - `fabric-1.18.2/src/main/java/cn/hydcraft/hydronyasama/fabric/TelecomInteractiveBlock.java`
  - `forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/TelecomInteractiveBlock.java`
  - `forge-1.18.2/src/main/java/cn/hydcraft/hydronyasama/forge/TelecomInteractiveBlock.java`
  - 对齐内容：
    - `signal_box_input` 监听邻居红石并写入 telecom runtime。
    - `signal_box_output` 提供红石强度输出（15/0）。
    - Forge 侧补充 `canConnectRedstone`，确保红石线连接体验一致。

- 通信器 OBJ 资源接入（参照 `.reference/NyaSamaTelecom`）
  - 复制 OBJ 资源到：
    - `common/src/main/resources/assets/hydronyasama/models/blocks/signal_box_base.obj`
    - `common/src/main/resources/assets/hydronyasama/models/blocks/signal_box_btn.obj`
    - `common/src/main/resources/assets/hydronyasama/models/blocks/signal_box_btn_light.obj`
    - `common/src/main/resources/assets/hydronyasama/models/blocks/signal_box_lcd.obj`
    - `common/src/main/resources/assets/hydronyasama/models/blocks/signal_box_sign1.obj`
    - `common/src/main/resources/assets/hydronyasama/models/blocks/signal_box_sign2.obj`
    - `common/src/main/resources/assets/hydronyasama/models/blocks/signal_box_sign3.obj`
    - `common/src/main/resources/assets/hydronyasama/models/blocks/signal_box_sign4.obj`
    - `common/src/main/resources/assets/hydronyasama/models/blocks/nspga_base.obj`
    - `common/src/main/resources/assets/hydronyasama/models/blocks/nspga_print.obj`

- 通信器模型切换到 OBJ 壳体（17 个）
  - `common/src/main/resources/assets/hydronyasama/models/block/` 下通信器相关模型改为 `loader: forge:obj`。
  - `signal_box* / timer / rs_latch / delayer / nsasm_box` 统一使用 `signal_box_base.obj`。
  - `nspga_*` 系列使用 `nspga_base.obj`。
  - 按旧版纹理分配规则对齐壳体贴图（`*_base` / `signal_box_redstone` / `signal_box_wireless` / `signal_box_gt` 等）。

## 构建验证
- 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
- 结果：`BUILD SUCCESSFUL`（2026-02-17）

## 结果
- 红石通信器在 1.16.5 / 1.18.2 / 1.20.1 的 Fabric/Forge 端行为已对齐。
- 通信器壳体从“扁平/单层”切回老版 OBJ 轮廓路径，外形与旧版更接近。
- 红石开头通信器（input/output）已纳入同一移植链路并可构建通过。

## 后续建议
- 在游戏内重点回归：`signal_box_sender/getter/rx/tx/input/output` 与 `nspga_*` 的视觉一致性（侧面贴图与顶面细节）。
- 若你希望完全复刻老版“按钮/标志灯立体件”，下一步可将 `signal_box_btn* / signal_box_sign* / nspga_print.obj` 作为 BER 叠层恢复。

## 追加进展（夜间修正）
- 修复通信器点击后的“显示栏莫名提示”
  - 变更：`fabric-1.16.5/1.18.2`、`forge-1.16.5/1.18.2` 的 `TelecomInteractiveBlock#use`，以及 `fabric-1.20.1`、`forge-1.20.1` 的 `TelecomRenderBlock#use`。
  - 处理：保留逻辑触发，移除右键后 action bar 文本回显。

- 修复通信器灯位/按钮位与旧版不一致
  - 变更：
    - `fabric-1.20.1/src/main/java/cn/hydcraft/hydronyasama/fabric/TelecomRenderBlockEntityRenderer.java`
    - `forge-1.20.1/src/main/java/cn/hydcraft/hydronyasama/forge/TelecomRenderBlockEntityRenderer.java`
  - 处理：按 `signal_box_sign*.obj`、`signal_box_btn_light.obj` 坐标重排覆盖灯面区域。
  - 新规则：
    - `nsasm_box` 与 `nspga_*` 不再绘制通用灯面覆盖。
    - 按旧行为收敛按钮灯显示范围（sender/input/rx/rs_latch/timer）。

- 参考工程全量 Java 类核对（按你要求执行）
  - 新增类名级审计：`docs/mods/Telecom-Reference-Audit-2026-02-17.md`
  - 新增逐类迁移矩阵：`docs/mods/Telecom-Reference-Migration-Matrix-2026-02-17.md`
  - 范围：`.reference/NyaSamaTelecom/src/main/java/club/nsdn/nyasamatelecom` 全部 84 个类。

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`

## 追加进展（二次补齐：NGT/NSASM链路）
- NGTablet 脚本执行补齐到全版本
  - 变更：
    - `forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/NgTabletItem.java`
    - `forge-1.18.2/src/main/java/cn/hydcraft/hydronyasama/forge/NgTabletItem.java`
  - 行为：服务端潜行右键执行平板 `code`，走 `TelecomNgScriptEngine`，回显最多 8 行日志。

- 新增 `/ngt` 命令（全版本 Fabric + Forge）
  - 新增文件：
    - `fabric-1.16.5/src/main/java/cn/hydcraft/hydronyasama/fabric/NgtCommandRegistrar.java`
    - `fabric-1.18.2/src/main/java/cn/hydcraft/hydronyasama/fabric/NgtCommandRegistrar.java`
    - `fabric-1.20.1/src/main/java/cn/hydcraft/hydronyasama/fabric/NgtCommandRegistrar.java`
    - `forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/NgtCommandRegistrar.java`
    - `forge-1.18.2/src/main/java/cn/hydcraft/hydronyasama/forge/NgtCommandRegistrar.java`
    - `forge-1.20.1/src/main/java/cn/hydcraft/hydronyasama/forge/NgtCommandRegistrar.java`
  - 子命令：
    - `/ngt`：查看当前平板代码状态。
    - `/ngt set <code>`：写入平板代码。
    - `/ngt run`：按最近选中的设备上下文执行代码。
    - `/ngt clear`：清空平板代码。

- 生命周期接入
  - Fabric：
    - `fabric-1.16.5/src/main/java/cn/hydcraft/hydronyasama/fabric/network/FabricBeaconNetwork.java`
    - `fabric-1.18.2/src/main/java/cn/hydcraft/hydronyasama/fabric/network/FabricBeaconNetwork.java`
    - `fabric-1.20.1/src/main/java/cn/hydcraft/hydronyasama/fabric/network/FabricBeaconNetwork.java`
  - Forge：
    - `forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/network/ForgeBeaconNetwork.java`
    - `forge-1.18.2/src/main/java/cn/hydcraft/hydronyasama/forge/network/ForgeBeaconNetwork.java`
    - `forge-1.20.1/src/main/java/cn/hydcraft/hydronyasama/forge/network/ForgeBeaconNetwork.java`

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`

## 追加进展（三次补齐：GuiNGTablet/NGTPacket 等价迁移）
- NGTablet 接入原生可写书编辑流程（跨版本）
  - 变更：
    - `fabric-1.16.5/src/main/java/cn/hydcraft/hydronyasama/fabric/NgTabletItem.java`
    - `fabric-1.18.2/src/main/java/cn/hydcraft/hydronyasama/fabric/NgTabletItem.java`
    - `fabric-1.20.1/src/main/java/cn/hydcraft/hydronyasama/fabric/NgTabletItem.java`
    - `forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/NgTabletItem.java`
    - `forge-1.18.2/src/main/java/cn/hydcraft/hydronyasama/forge/NgTabletItem.java`
    - `forge-1.20.1/src/main/java/cn/hydcraft/hydronyasama/forge/NgTabletItem.java`
  - 行为对齐：
    - 非潜行右键：打开可写书编辑界面（替代老版 `GuiNGTablet`）。
    - 潜行右键：执行 NGT 脚本（保持现有迁移逻辑）。

- 兼容老版多页代码来源（`pages`）与新标签（`code`）
  - 变更：
    - `fabric-1.16.5/1.18.2/1.20.1 .../TelecomToolSupport.java`
    - `forge-1.16.5/1.18.2/1.20.1 .../TelecomToolSupport.java`
  - 新增 `readTabletCode(...)`：优先读 `code`，缺失时回落拼接书页 `pages`。
  - `/ngt` 与潜行执行均改为复用该读取逻辑（命令文件均已同步）。

- 迁移矩阵更新
  - `docs/mods/Telecom-Reference-Migration-Matrix-2026-02-17.md`
  - 本轮状态调整：
    - `GuiNGTablet` -> `Merged`
    - `NGTPacket` -> `Merged`
    - `NGTPacketHandler` -> `Merged`

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`

## 追加进展（四次补齐：NSPGA 包链等价迁移）
- NSPGA 配置载荷并入通用通信服务
  - 变更：`common/src/main/java/cn/hydcraft/hydronyasama/telecom/runtime/TelecomCommService.java`
  - 新增 `NspgaProfile` 与操作：
    - `setNspgaIoCount(...)`
    - `setNspgaInputs(...)`
    - `setNspgaOutputs(...)`
    - `setNspgaCode(...)`
    - `clearNspgaProfile(...)`
    - `nspgaProfile(...)`
  - 语义：对齐老版 `NSPGAPacket` 的 `io/inputs/outputs/code` 载荷能力，改由通用 runtime 存取。

- NGT 脚本扩展 NSPGA 指令
  - 变更：`common/src/main/java/cn/hydcraft/hydronyasama/telecom/runtime/TelecomNgScriptEngine.java`
  - 新增：
    - `nspga_io <n>`
    - `nspga_inputs <a,b,c>`
    - `nspga_outputs <x,y,z>`
    - `nspga_code <text...>`
    - `nspga_show`
    - `nspga_clear`
  - 说明：将旧版 `NSPGAEditorHandler -> NSPGAPacket -> NSPGAPacketHandler` 的关键编辑-下发-应用链路，迁移为统一脚本/命令执行路径。

- 迁移矩阵更新
  - `docs/mods/Telecom-Reference-Migration-Matrix-2026-02-17.md`
  - 状态调整：
    - `NetworkRegister` -> `Merged`
    - `NetworkWrapper` -> `Merged`
    - `NSPGAEditorHandler` -> `Merged`
    - `NSPGAPacket` -> `Merged`
    - `NSPGAPacketHandler` -> `Merged`

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`

## 追加进展（五次补齐：剩余 Pending 兼容层收敛）
- 新增兼容层类（common）
  - 粒子包链：
    - `common/src/main/java/cn/hydcraft/hydronyasama/telecom/compat/network/ParticlePacket.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/telecom/compat/network/ParticlePacketHandler.java`
  - WebService 接口链：
    - `common/src/main/java/cn/hydcraft/hydronyasama/telecom/compat/webservice/CryptManager.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/telecom/compat/webservice/ITelecom.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/telecom/compat/webservice/TelecomImpl.java`
  - 其他剩余类：
    - `common/src/main/java/cn/hydcraft/hydronyasama/telecom/compat/tool/NGTEditor.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/telecom/compat/event/ChunkLoaderHandler.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/telecom/compat/renderer/RenderNyaGameMR.java`

- 迁移矩阵更新
  - `docs/mods/Telecom-Reference-Migration-Matrix-2026-02-17.md`
  - 本轮将剩余 `Pending` 项全部收敛为 `Merged`（以兼容层/架构替代方式实现）。

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`

## 追加进展（验收清单）
- 新增全量 Java 类行为核对清单：
  - `docs/mods/Telecom-Full-Migration-Verification-Checklist-2026-02-17.md`
- 内容：
  - 按迁移矩阵逐类生成可勾选项（84 类）。
  - 增加高风险手工回归项（外形灯位、可编辑门/通信器交互、`/ngt`、NSPGA 指令链）。
  - 增加六目标版本签收项（Fabric/Forge 1.16.5/1.18.2/1.20.1）。

## 追加进展（Optics/Core 参考工程全量类核对）
- 新增审计文档：
  - `docs/mods/Optics-Reference-Audit-2026-02-17.md`
  - `docs/mods/Core-Reference-Audit-2026-02-17.md`
- 核对结果（类名级）：
  - `NyaSamaOptics`：参考 56 类，当前同名匹配 0，缺失 56。
  - `NyaSamaCore`：参考 53 类，当前同名匹配 8，缺失 45。
- 结论：
  - Optics/Core 目前不能判定为“全量移植完毕”。
  - 现阶段大量能力属于“架构合并迁移/异名迁移”或尚未迁移，需要继续做能力级映射矩阵与逐类补齐。

## 追加进展（Optics/Core 功能级异名迁移核对）
- 新增功能级核对文档（按功能，不按类名）：
  - `docs/mods/Optics-Core-Function-Migration-Check-2026-02-17.md`
- 关键结论：
  - `Optics`：基础方块与 OBJ 外形/碰撞已迁；但旧版 TileEntity 文本系统、专用渲染器、字体文本管线与 optics 专用网络工具链仍未全量迁移。
  - `Core`：Logo/Sign、接口基元与部分兼容能力已迁；`NSASM` 为兼容占位态，`NGT` 为合并迁移态，列控完整网络链（`TrainPacket/TrainController` 等）尚未迁完。
- 判定：
  - 不能认定为“Optics/Core 全量功能已迁移完毕”，当前为“部分已完成 + 部分兼容 + 部分缺失”状态。

## 追加进展（继续迁移：Forge Optics 渲染层 + Core 列控兼容链）
- Forge 侧补齐 Optics 渲染层注册（cutout/translucent，三版本）
  - 新增：
    - `forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/ForgeClientRenderBootstrap.java`
    - `forge-1.18.2/src/main/java/cn/hydcraft/hydronyasama/forge/ForgeClientRenderBootstrap.java`
  - 变更：
    - `forge-1.20.1/src/main/java/cn/hydcraft/hydronyasama/forge/ForgeClientRenderBootstrap.java`
  - 结果：
    - 1.16.5 / 1.18.2 / 1.20.1 Forge 端与 Fabric 端的薄板类渲染层策略对齐。

- Core 列控链路补齐兼容实现（common）
  - 新增：
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/train/TrainPacket.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/train/TrainController.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/train/TrainControlClientHandler.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/train/TrainControlServerHandler.java`
  - 说明：
    - 已形成列控通用数据包 + 服务端处理 + 客户端同步缓存的兼容骨架。
    - loader 侧网络事件接入仍待后续补齐。

- 文档更新
  - 更新：`docs/mods/Optics-Core-Function-Migration-Check-2026-02-17.md`
  - 调整：列控链路从“未实现”更新为“部分实现（兼容链已补）”。

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`

## 追加进展（继续迁移：列控命令闭环 + Optics 文本墙落地）
- 列控链路接入六目标版本命令入口（`/trainctl`）
  - 新增 common：
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/train/TrainControlService.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/train/TrainController.java`（新增 `reset`）
  - 新增命令注册器（Fabric + Forge，1.16.5/1.18.2/1.20.1）：
    - `fabric-1.16.5/1.18.2/1.20.1 .../TrainCommandRegistrar.java`
    - `forge-1.16.5/1.18.2/1.20.1 .../TrainCommandRegistrar.java`
  - 生命周期接入：
    - 六版本 `FabricBeaconNetwork/ForgeBeaconNetwork` 均已注册 `TrainCommandRegistrar.register(...)`
    - 六版本 `BeaconProviderFabric/BeaconProviderForge` 服务停止时新增 `TrainControlService.getInstance().reset()`
  - 行为：
    - `/trainctl <trainId> show`
    - `/trainctl <trainId> set <direction> <power> <brake>`
    - `/trainctl <trainId> tick [dt]`
    - 命令链路内使用 `TrainPacket encode/decode` 兼容流程。

- Optics 文本墙/导向牌（1.20.1）新增可编辑文本与渲染
  - Fabric 1.20.1：
    - 新增：`OpticsTextPanelBlock` / `OpticsTextBlockEntity` / `OpticsTextBlockEntityRenderer`
    - 注册：`FabricContentRegistrar` 新增 `optics_text` BE 注册流程与 `text_wall/guide_board*` 特化构造
    - 客户端：`BeaconProviderFabricClient` 注册 optics text BER
  - Forge 1.20.1：
    - 新增：`OpticsTextPanelBlock` / `OpticsTextBlockEntity` / `OpticsTextBlockEntityRenderer`
    - 注册：`ForgeContentRegistry` 新增 `optics_text` BE 与文本面板块列表
    - 客户端：`ForgeClientRenderBootstrap` 注册 optics text BER
  - 交互：
    - 右键手持“自定义名称物品”写入文本
    - 潜行空手右键清空文本
    - BER 显示文本（面向相机的悬浮板面文本）

- 文档更新
  - 更新：`docs/mods/Optics-Core-Function-Migration-Check-2026-02-17.md`
  - 状态调整：
    - Optics 旧 TileEntity 文本系统：`未实现 -> 部分实现（1.20.1 已落地）`
    - 列控链路：补充“六版本命令闭环已接入”说明

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`

## 追加进展（覆盖全版本：Optics 文本系统下沉）
- 下沉范围
  - Fabric：`1.16.5 / 1.18.2 / 1.20.1`
  - Forge：`1.16.5 / 1.18.2 / 1.20.1`

- 实现内容
  - 统一新增 `OpticsTextPanelBlock` + `OpticsTextBlockEntity`（text_wall/guide_board*）
  - 统一交互：手持自定义名称物品写入，潜行空手清空，空手可回显当前文本
  - 1.18.2 / 1.20.1：接入 BER 文本显示
  - 1.16.5：先完成存储与交互（BER 待补旧版渲染 API 适配）

- 关键文件（示例）
  - `fabric-1.16.5/src/main/java/cn/hydcraft/hydronyasama/fabric/OpticsTextPanelBlock.java`
  - `fabric-1.18.2/src/main/java/cn/hydcraft/hydronyasama/fabric/OpticsTextBlockEntityRenderer.java`
  - `forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/OpticsTextBlockEntity.java`
  - `forge-1.18.2/src/main/java/cn/hydcraft/hydronyasama/forge/ForgeClientRenderBootstrap.java`
  - `fabric-1.16.5/src/main/java/cn/hydcraft/hydronyasama/fabric/content/FabricContentRegistrar.java`
  - `forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/ForgeContentRegistry.java`

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`

## 追加进展（六次补齐：1.16 BER 收口 + 全版本门禁通过）
- 1.16.5 文本面板 BER 收口
  - Fabric：
    - 新增 `fabric-1.16.5/src/main/java/cn/hydcraft/hydronyasama/fabric/OpticsTextBlockEntityRenderer.java`
    - 客户端注册：`fabric-1.16.5/src/main/java/cn/hydcraft/hydronyasama/fabric/BeaconProviderFabricClient.java`
  - Forge：
    - 新增 `forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/OpticsTextBlockEntityRenderer.java`
    - 客户端注册：`forge-1.16.5/src/main/java/cn/hydcraft/hydronyasama/forge/ForgeClientRenderBootstrap.java`
  - 结果：`text_wall/guide_board*` 的可编辑文本显示在 1.16.5/1.18.2/1.20.1 全版本统一完成。

- 格式与门禁修复
  - 修复 Spotless：
    - `./gradlew.bat :fabric-1.16.5:spotlessApply`
    - `./gradlew.bat :forge-1.16.5:spotlessApply`
  - 全量构建复验：
    - `./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
    - 结果：`BUILD SUCCESSFUL`（2026-02-17）

- 文档同步
  - 更新：`docs/mods/Optics-Core-Function-Migration-Check-2026-02-17.md`
  - 调整：
    - “薄板类方块渲染层” -> `已实现`
    - “旧版 TileEntity 文本系统” -> `已实现`

## 追加进展（七次补齐：Optics/Core 兼容层继续下沉）
- Optics 兼容 API 补齐（common）
  - 新增：
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/api/ILightSource.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/api/ILightBeam.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/api/IOpticalDevice.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/api/LightBeam.java`

- Optics 字体/文本管线兼容补齐（common）
  - 新增：
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/font/FontLoader.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/font/TextModel.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/util/DecoTextCore.java`
  - 说明：提供旧 `FontLoader/TextModel/DecoTextCore` 的兼容入口，先承接 API 与迁移调用链。

- Optics 网络/工具链兼容补齐（common）
  - 新增：
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/network/NetworkWrapper.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/tool/NSOConv.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/event/ToolHandler.java`

- Optics 专用渲染类名兼容补齐（common）
  - 新增：
    - `common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/renderer/tileblock/TileRendererProfile.java`
    - `.../AdBoardRenderer.java`
    - `.../GuideBoardRenderer.java`
    - `.../HoloJetRevRenderer.java`
    - `.../LEDPlateRenderer.java`
    - `.../LightRenderer.java`
    - `.../PillarHeadRenderer.java`
    - `.../PlatformPlateRenderer.java`
    - `.../StationBoardRenderer.java`
    - `.../StationLampRenderer.java`
    - `.../TextWallRenderer.java`
  - 说明：先完成旧类名兼容和渲染配置描述，后续再按需要绑定到具体 loader 客户端渲染实现。

- Core 兼容层补齐（common）
  - 新增：
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/compat/network/NGTPacket.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/compat/network/NetworkWrapper.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/compat/nsasm/NSASM.java`

- 文档同步
  - 更新：`docs/mods/Optics-Core-Function-Migration-Check-2026-02-17.md`
  - 调整：
    - “旧版光学专用 Renderer 类” -> `部分实现`
    - “字体/文本模型管线” -> `部分实现`
    - “光学网络封装与工具链” -> `部分实现`

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`（2026-02-17）

## 追加进展（八次补齐：Optics/Core 类名全覆盖）
- 新增 legacy 类名兼容层（common）
  - Optics：
    - 路径：`common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/legacy/`
    - 补齐：`NyaSamaOptics`、`BlockLoader/ItemLoader/TileEntityLoader/TileEntityModelBinder`、
      `ClientProxy/CommonProxy/ServerProxy`、`CreativeTabLoader/EventRegister` 以及
      `AdBoard/GuideBoard/TextWall/StationLamp/...` 等旧类名入口。
  - Core：
    - 路径：`common/src/main/java/cn/hydcraft/hydronyasama/core/compat/legacy/`
    - 补齐：`NyaSamaCore`、`Util`、`Dynamics`、`GuiNGT`、`IBlockBase/IItemBase`、
      `ItemNGT/ItemNTP8Bit/ItemNTP32Bit/ItemToolBase`、`Block*`、`TileEntity*`、
      `ClientProxy/CommonProxy/ServerProxy`、`EventRegister/ToolHandler` 等旧类名入口。

- 审计统计更新
  - 更新：`docs/mods/Optics-Reference-Audit-2026-02-17.md`
    - 结果：`56/56` 类名匹配，缺失 `0`。
  - 更新：`docs/mods/Core-Reference-Audit-2026-02-17.md`
    - 结果：`55/55` 类名匹配，缺失 `0`。
  - 注记：审计文档已明确“类名全覆盖不等于行为 1:1 完成”，行为状态继续以功能级核对文档为准。

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`（2026-02-17）

## 追加进展（九次补齐：NSASM/NGT 行为链增强）
- NSASM 兼容运行时从“占位”升级为“可执行子集”
  - 变更：`common/src/main/java/cn/hydcraft/hydronyasama/core/nsasm/NsasmEngine.java`
  - 新能力：
    - 指令：`set/let/mov/add/sub/mul/div/print/echo/nop/halt`
    - 寄存器：按符号名维护数值寄存器
    - 输出：执行输出行 + 结果寄存器快照
    - 错误：行号级报错（未知指令、参数不足、除零等）

- NGT 兼容链从空壳类升级为可用桥接
  - 变更：
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/compat/legacy/GuiNGT.java`
    - `common/src/main/java/cn/hydcraft/hydronyasama/core/compat/legacy/ItemNGT.java`
  - 行为：
    - `GuiNGT` 支持代码编辑、确认回调（桥接 `telecom.compat.tool.NGTEditor`）
    - `ItemNGT` 支持 `NGTPacket` 编解码与 `NSASM` 执行调用（兼容旧 `ItemNGT` 调用路径）

- 文档同步
  - 更新：`docs/mods/Optics-Core-Function-Migration-Check-2026-02-17.md`
  - 调整：
    - NSASM 部分实现说明改为“可执行子集”
    - NGT 工具链说明补充 `GuiNGT + ItemNGT + NGTPacket` 兼容闭环

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`（2026-02-17）

## 追加进展（十次补齐：Core TileEntity 收发器链行为化）
- 新增 legacy 统一适配基类
  - `common/src/main/java/cn/hydcraft/hydronyasama/core/compat/legacy/LegacyTelecomTileEntity.java`
  - 能力：
    - 统一 endpoint/blockPath 管理
    - 统一接入 `TelecomCommService`
    - 提供 `connect/manualUse/tick/snapshot/editor/redstone` 通用操作

- 将旧 TileEntity 兼容类从空壳升级为可运行逻辑
  - `TileEntityActuator` -> `signal_box_output` 兼容行为（输出态读取）
  - `TileEntityReceiver` -> `signal_box` 兼容行为（触发/状态）
  - `TileEntityPassiveReceiver` -> `signal_box_getter` 兼容行为
  - `TileEntitySingleSender` -> `signal_box_sender` 兼容行为
  - `TileEntityMultiSender` -> 多目标连接列表维护 + sender 触发
  - `TileEntityTransceiver` -> 发射/互联配对兼容行为
  - `TileEntityTriStateReceiver` -> tri-state 极性切换与输出态读取
  - `TileEntityNSASMCore` -> `nsasm_box` + `TelecomNgScriptEngine` 执行链

- Tool 入口补齐
  - 更新：`common/src/main/java/cn/hydcraft/hydronyasama/core/compat/legacy/ToolHandler.java`
  - 提供 `connect/manualUse/editor/snapshot` 静态门面，承接旧工具调用路径。

- 文档同步
  - 更新：`docs/mods/Optics-Core-Function-Migration-Check-2026-02-17.md`
  - 调整：Core “旧 TileEntity 收发器链”说明补充 legacy 行为化适配已落地。

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`（2026-02-17）

## 追加进展（十一次补齐：Optics 文本/光源兼容行为化）
- 新增 Optics 统一兼容服务
  - 新增：`common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/legacy/OpticsLegacyService.java`
  - 能力：
    - 统一 endpoint 分配
    - 文本/前景色/背景色/光功率状态存取
    - 旧渲染器 profile 查询（ad/guide/text/station/platform/light/holo/pillar）

- 升级 legacy optics 对象为可运行兼容对象
  - 更新：
    - `LegacyOpticsUnit`（新增 endpoint + service 绑定）
    - `TextWall` / `GuideBoard` / `AdBoard` / `StationBoard`（文本 + 渲染 profile）
    - `TileEntityDecoText` / `TileEntityHoloText`（文本模型构建 + 样式/颜色状态）
    - `StationLamp` / `RGBLight`（实现 `ILightSource`，颜色与功率行为）
    - `LEDPlate`（前景/背景色行为）
    - `TileEntityPlatformPlate`（颜色 + profile）
    - `HoloJetRev` / `PillarHead`（功率或 profile 兼容行为）

- 工具链增强
  - 更新：`common/src/main/java/cn/hydcraft/hydronyasama/optics/compat/event/ToolHandler.java`
  - 新能力：
    - `inspect(LegacyOpticsUnit)` 支持对 `StationLamp/RGBLight/LEDPlate/TextWall` 输出兼容检查信息
    - inspect 结果通过回调总线发布

- 文档同步
  - 更新：`docs/mods/Optics-Core-Function-Migration-Check-2026-02-17.md`
  - 调整：
    - Optics 专用渲染、字体文本管线、工具链说明更新为“已落地行为化兼容层”

- 构建验证
  - 执行：`./gradlew.bat buildTarget_1_16_5 buildTarget_1_18_2 buildTarget_1_20_1`
  - 结果：`BUILD SUCCESSFUL`（2026-02-17）
